# LingoFlow - Project Specification

> **Source of Truth** - é¡¹ç›®è§„æ ¼æ–‡æ¡£æ€»ç´¢å¼•

---

## 1. é¡¹ç›®æ¦‚è§ˆ (Project Overview)

| å±æ€§ | è¯´æ˜ |
|------|------|
| **é¡¹ç›®åç§°** | LingoFlow |
| **æ ¸å¿ƒå®šä½** | åŸºäº AI ç”Ÿæˆè¯­å¢ƒçš„å‚ç›´å•è¯è®°å¿†åº”ç”¨ |
| **è®¾è®¡ç†å¿µ** | AI é©±åŠ¨ã€è¾“å‡ºåé¦ˆå­¦ä¹ ã€æ²‰æµ¸å¼è®°å¿† |
| **ç›®æ ‡ç”¨æˆ·** | è‹±è¯­å­¦ä¹ è€… (å¤‡è€ƒ/æ—¥å¸¸å­¦ä¹ ) |

---

## 2. æ ¸å¿ƒæ¶æ„ç´¢å¼• (Architecture Index)

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| ğŸ“‹ éœ€æ±‚è§„æ ¼ | [requirement.md](./docs/requirement.md) | æ¨¡å—åˆ’åˆ†ã€ç”¨æˆ·åœ°å›¾ã€æ ¸å¿ƒé€»è¾‘é—­ç¯ |
| ğŸ”§ ç³»ç»Ÿè®¾è®¡ | [design.md](./docs/design.md) | ER å›¾ã€API å®šä¹‰ã€æ•°æ®è¡¨è®¾è®¡ |
| ğŸ¨ åŸå‹é¢„è§ˆ | [total.html](./docs/prototype/total.html) | å¯ç‚¹å‡»äº¤äº’åŸå‹ |

---

## 3. æŠ€æœ¯æ ˆ (Tech Stack)

| å±‚çº§ | æŠ€æœ¯é€‰å‹ |
|------|----------|
| **å‰ç«¯** | Vue 3 + TypeScript + Element UI + Tailwind CSS |
| **åç«¯** | Spring Boot 3.x |
| **æ•°æ®åº“** | MySQL 8.0 + Redis |
| **AI æœåŠ¡** | ç¡…åŸºæµåŠ¨ API |
| **è®¤è¯** | JWT (Access + Refresh Token) |
| **éƒ¨ç½²** | äº‘æœåŠ¡å™¨åŸç”Ÿéƒ¨ç½² + Nginx |

---

## 4. æ ¸å¿ƒåŠŸèƒ½å¿«ç…§ (Feature List & Status)

### Phase 1: åŸºç¡€è®¾æ–½ (Week 1) âœ…
- [x] æ­å»ºå‰ç«¯é¡¹ç›®ç»“æ„ (Vue 3 + Vite)
- [x] æ­å»ºåç«¯é¡¹ç›®ç»“æ„ (Spring Boot)
- [x] é…ç½®æ•°æ®åº“è¿æ¥ (MySQL)
- [x] å®ç°ç”¨æˆ·è®¤è¯ (æ³¨å†Œ/ç™»å½•/JWT)
- [x] é…ç½®ç¯å¢ƒå˜é‡ä¸å®‰å…¨è§„èŒƒ

### Phase 2: æ ¸å¿ƒå­¦ä¹ æ¨¡å— (Week 2-3) âœ…
- [x] å®ç°è¯åº“ç®¡ç† (CRUD)
- [x] å®ç°å•è¯å±•ç¤ºä¸ç­›é€‰
- [x] å®ç°ç”Ÿè¯æœ¬åŠŸèƒ½
- [x] é›†æˆç¡…åŸºæµåŠ¨ API (æ–‡ç« ç”Ÿæˆ)
- [x] å®ç°å­¦ä¹ ä¼šè¯ç®¡ç†
- [x] å®ç°é€ å¥è¾“å…¥ä¸ AI æ‰¹æ”¹

### Phase 3: å¤ä¹ ç³»ç»Ÿ (Week 4) âœ…
- [x] å®ç° SM-2 å¤ä¹ ç®—æ³•
- [x] å®ç°å¤ä¹ é˜Ÿåˆ—ç”Ÿæˆ
- [x] å®ç°ç†Ÿæ‚‰åº¦è‡ªè¯„åŠŸèƒ½
- [x] å®ç°é€‰æ‹©é¢˜æµ‹è¯•æµç¨‹
- [x] å®ç°é”™è¯¯é˜Ÿåˆ—å¾ªç¯

### Phase 4: ç”¨æˆ·ä½“éªŒ (Week 5) âœ…
- [x] å®ç°ç»Ÿè®¡ä»ªè¡¨ç›˜
- [x] å®ç°å‘¨/æœˆå­¦ä¹ æ›²çº¿å›¾è¡¨
- [x] ä¼˜åŒ–å‰ç«¯äº¤äº’ä¸åŠ¨ç”»
- [x] æ·»åŠ é”™è¯¯å¤„ç†ä¸ Toast æç¤º
- [x] å“åº”å¼è®¾è®¡é€‚é…

### Phase 5: æµ‹è¯•ä¸éƒ¨ç½² (Week 6)
- [ ] ç¼–å†™å•å…ƒæµ‹è¯• (æ ¸å¿ƒé€»è¾‘)
- [ ] ç¼–å†™é›†æˆæµ‹è¯• (API)
- [ ] æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜
- [ ] Docker å®¹å™¨åŒ–
- [ ] éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

## 5. å…¨å±€å¼€å‘çº¦æŸ (Global Constraints)

### 5.1 ä»£ç è§„èŒƒ
- å‰ç«¯: ESLint + Prettier (Vue/TS è§„èŒƒ)
- åç«¯: Alibaba Java Coding Guidelines
- Git: Conventional Commits

### 5.2 å®‰å…¨è§„èŒƒ
| è§„èŒƒ | è¯´æ˜ |
|------|------|
| å¯†ç å­˜å‚¨ | bcrypt åŠ å¯† (cost=12) |
| Token | JWT HS256, Access 1h / Refresh 7d |
| æ•æ„Ÿä¿¡æ¯ | ç¦æ­¢ç¡¬ç¼–ç , ä½¿ç”¨ç¯å¢ƒå˜é‡ |
| æ—¥å¿— | ç¦æ­¢è®°å½•å¯†ç ã€Token |
| CORS | é…ç½®å…è®¸çš„åŸŸåç™½åå• |

### 5.3 æµ‹è¯•è¦æ±‚
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘: å•å…ƒæµ‹è¯•è¦†ç›–
- æ‰€æœ‰ API: é›†æˆæµ‹è¯•è¦†ç›–
- å‰ç«¯: å…³é”®ç»„ä»¶ E2E æµ‹è¯•

---

## 6. é¡¹ç›®ç›®å½•ç»“æ„ (Project Structure)

```
lingoflow/
â”œâ”€â”€ spec/                           # è§„æ ¼æ–‡æ¡£
â”‚   â”œâ”€â”€ docs/
â”‚   â”‚   â”œâ”€â”€ requirement.md          # éœ€æ±‚åˆ†æ
â”‚   â”‚   â”œâ”€â”€ design.md               # ç³»ç»Ÿè®¾è®¡
â”‚   â”‚   â””â”€â”€ prototype/
â”‚   â”‚       â””â”€â”€ total.html          # UI åŸå‹
â”‚   â””â”€â”€ spec.md                     # æ€»ç´¢å¼• (å½“å‰æ–‡ä»¶)
â”‚
â”œâ”€â”€ frontend/                       # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                    # API è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ components/             # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layouts/                # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/                  # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ stores/                 # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ backend/                        # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/lingoflow/
â”‚   â”‚       â”œâ”€â”€ controller/         # API æ§åˆ¶å™¨
â”‚   â”‚       â”œâ”€â”€ service/            # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚       â”œâ”€â”€ mapper/             # MyBatis Mapper
â”‚   â”‚       â”œâ”€â”€ entity/             # å®ä½“ç±»
â”‚   â”‚       â”œâ”€â”€ dto/                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚       â”œâ”€â”€ config/             # é…ç½®ç±»
â”‚   â”‚       â”œâ”€â”€ security/           # å®‰å…¨ç›¸å…³
â”‚   â”‚       â””â”€â”€ exception/          # å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ application.yml
â”‚   â”‚   â””â”€â”€ db/migration/           # Flyway è¿ç§»
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

---

## 7. å¿«é€Ÿé“¾æ¥

- ğŸ“‹ [éœ€æ±‚æ–‡æ¡£](./docs/requirement.md)
- ğŸ”§ [è®¾è®¡æ–‡æ¡£](./docs/design.md)  
- ğŸ¨ [åŸå‹é¢„è§ˆ](./docs/prototype/total.html)

---

## 8. åŒæ­¥æ—¥å¿— (Sync Log)

| æ—¶é—´ | æ–¹å‘ | è¯´æ˜ |
|------|------|------|
| 2026-01-17 19:10 | to-spec | Phase 1 å®ŒæˆåŒæ­¥ï¼šæ ‡è®°åŸºç¡€è®¾æ–½ä»»åŠ¡å®Œæˆï¼Œæ›´æ–°ç›®å½•ç»“æ„ (repositoryâ†’mapper) |
| 2026-01-18 16:09 | to-spec | Phase 2-3 å®ŒæˆåŒæ­¥ï¼šæ ‡è®°å­¦ä¹ æ¨¡å—å’Œå¤ä¹ ç³»ç»Ÿå®Œæˆï¼Œæ›´æ–° review_records è¡¨å®šä¹‰ï¼Œæ·»åŠ  isFromErrorQueue å‚æ•° |
| 2026-01-18 18:10 | to-spec | Phase 4 å®ŒæˆåŒæ­¥ï¼šæ ‡è®°ç”¨æˆ·ä½“éªŒä¼˜åŒ–å®Œæˆï¼ˆç»Ÿè®¡ä»ªè¡¨ç›˜ã€å‘¨å­¦ä¹ æ›²çº¿ã€Premium UI/UXã€MainLayoutæŒä¹…åŒ–å¯¼èˆªã€é”™è¯¯å¤„ç†ï¼‰ï¼Œæ·»åŠ  layouts/ ç›®å½•åˆ°é¡¹ç›®ç»“æ„ï¼Œæ›´æ–°ç»Ÿè®¡ API å®šä¹‰ |
| 2026-01-20 00:27 | to-spec | Phase 6-8 å®ŒæˆåŒæ­¥ï¼šæ ‡è®°è¯å…¸ç³»ç»Ÿã€å­¦ä¹ å®šåˆ¶ã€é˜…è¯»ç†è§£å®Œæˆï¼›è¡¥å…¨ LearningSession/SessionWord å®ä½“å­—æ®µå’Œ MyBatis æ˜ å°„ï¼›æ›´æ–° word_dictionary_tags è¡¨å®šä¹‰æ·»åŠ  created_at å­—æ®µ |
| 2026-01-21 15:48 | to-spec | Phase 9 å®ŒæˆåŒæ­¥ï¼šRedisç¼“å­˜é›†æˆå®Œæˆï¼›å®ç°å­¦ä¹ è¿›åº¦æŒä¹…åŒ–ï¼ˆLearningStateDtoï¼‰å’Œå¤ä¹ é˜Ÿåˆ—ç¼“å­˜ï¼ˆSM-2ï¼‰ï¼›æ›´æ–° requirement.md å’Œ design.md |
| 2026-01-21 18:12 | to-spec | Phase 10 å®ŒæˆåŒæ­¥ï¼šUI/UXé‡æ„(Style D)ï¼›æ·»åŠ User/Stats APIå®šä¹‰ï¼›æ›´æ–°å­¦ä¹ æ¨¡å—çµæ´»é€‰è¯é€»è¾‘ï¼ˆä¸å†å¼ºåˆ¶5ä¸ªå•è¯ï¼‰ |

---

## Phase 6: è¯å…¸ç³»ç»Ÿ âœ…

**ç›®æ ‡**: å®ç°å¤šè¯å…¸æ”¯æŒï¼Œç”¨æˆ·å¯é€‰æ‹©å››çº§ã€å…­çº§ã€é›…æ€ã€æ‰˜ç¦ç­‰è¯å…¸ï¼Œç‹¬ç«‹ç»Ÿè®¡è¿›åº¦

- [x] æ•°æ®åº“è¿ç§»ï¼šåˆ›å»º dictionaries å’Œ word_dictionary_tags è¡¨ (Ref: design_extension.md#æ•°æ®åº“æ‰©å±•-è¯å…¸ç³»ç»Ÿ)
- [x] åç«¯å®ç°ï¼šDictionaryControllerã€DictionaryService
  - [x] GET /api/dictionaries - è·å–è¯å…¸åˆ—è¡¨
  - [x] GET /api/dictionaries/{id}/progress - è·å–è¯å…¸è¿›åº¦
- [x] å‰ç«¯å®ç°ï¼šè¯å…¸é€‰æ‹©å™¨ç»„ä»¶ã€è¿›åº¦æ˜¾ç¤º
  - [x] DictionarySelector.vue - è¯å…¸é€‰æ‹©ç»„ä»¶
  - [x] VocabularyView.vue æ‰©å±• - æ˜¾ç¤ºè¯å…¸æ ‡ç­¾å’Œåˆ†ç±»è¿›åº¦
- [x] é›†æˆæµ‹è¯•ï¼šè¯å…¸åˆ‡æ¢æµç¨‹éªŒè¯ (Ref: requirement.md#UM-08)

---

## Phase 7: å­¦ä¹ å®šåˆ¶ä¸æ–‡ç« æ¸²æŸ“å¢å¼º âœ…

**ç›®æ ‡**: å®ç°å­¦ä¹ å‰çš„ä¸ªæ€§åŒ–å®šåˆ¶å’Œæ–‡ç« é˜…è¯»äº¤äº’å¢å¼º

- [x] æ•°æ®åº“è¿ç§»ï¼šä¿®æ”¹ learning_sessions è¡¨ï¼Œæ–°å¢ themeã€difficulty_preferenceã€target_word_count å­—æ®µ (Ref: design_extension.md#æ•°æ®åº“æ‰©å±•-å­¦ä¹ å®šåˆ¶)
- [x] åç«¯å®ç°ï¼šå­¦ä¹ ä¼šè¯å®šåˆ¶å‚æ•°
  - [x] POST /api/learning/sessions æ‰©å±• - æ”¯æŒå®šåˆ¶å‚æ•°
  - [x] POST /api/tts/speak - æ–‡æœ¬è½¬è¯­éŸ³æ¥å£
- [x] AIæœåŠ¡ï¼šæ›´æ–°æ–‡ç« ç”Ÿæˆæç¤ºè¯æ¨¡æ¿
  - [x] é›†æˆä¸»é¢˜ã€éš¾åº¦ã€è¯æ±‡æ•°é‡å‚æ•°åˆ°æç¤ºè¯
- [x] å‰ç«¯å®ç°ï¼š
  - [x] LearningCustomizer.vue - å­¦ä¹ å®šåˆ¶å‚æ•°é€‰æ‹©å™¨
  - [x] ArticleReader.vue å¢å¼º - å•è¯é«˜äº®ã€æ°”æ³¡ã€æœ—è¯»ã€ç¿»è¯‘æŠ˜å 
  - [x] TTSService.ts - TTS API å°è£…
- [x] é›†æˆæµ‹è¯•ï¼šå®Œæ•´å­¦ä¹ å®šåˆ¶å’Œé˜…è¯»ä½“éªŒæµç¨‹ (Ref: requirement.md#UM-09, UM-10)

---

## Phase 8: é˜…è¯»ç†è§£ä¸é€ å¥æ”¹è¿› âœ…

**ç›®æ ‡**: å¼•å…¥é˜…è¯»ç†è§£é¢˜ç›®ï¼Œä¼˜åŒ–é€ å¥é¢˜å¼•å¯¼

- [x] æ•°æ®åº“è¿ç§»ï¼šä¿®æ”¹ session_words è¡¨ï¼Œæ–°å¢ question_typeã€question_data å­—æ®µ (Ref: design_extension.md#æ•°æ®åº“æ‰©å±•-é˜…è¯»ç†è§£é¢˜ç›®)
- [x] AIæœåŠ¡ï¼šç”Ÿæˆé˜…è¯»ç†è§£é¢˜ç›®å’Œæ”¹è¿›çš„é€ å¥é¢˜
  - [x] ç”Ÿæˆ2é“è¯æ±‡ç†è§£é€‰æ‹©é¢˜
  - [x] ç”Ÿæˆ1é“æ–‡ç« ä¸»æ—¨é¢˜
  - [x] ç”Ÿæˆé€ å¥é¢˜ä¸»é¢˜å’Œä¸­æ–‡ä¾‹å¥
- [x] å‰ç«¯å®ç°ï¼š
  - [x] ComprehensionQuiz.vue - é˜…è¯»ç†è§£é€‰æ‹©é¢˜ç»„ä»¶
  - [x] SentenceMaking.vue æ”¹è¿› - æ˜¾ç¤ºä¸»é¢˜ã€ä¸­æ–‡ä¾‹å¥ï¼Œéšè—é‡Šä¹‰
- [x] é›†æˆæµ‹è¯•ï¼šé˜…è¯»ç†è§£ç­”é¢˜å’Œæ”¹è¿›é€ å¥æµç¨‹ (Ref: requirement.md#UM-11, UM-12)

---

## Phase 9: Redis ç¼“å­˜é›†æˆ (Redis Integration) âœ…

**ç›®æ ‡**: å¼•å…¥ Redis ç¼“å­˜å±‚ï¼Œä¼˜åŒ–å­¦ä¹ çŠ¶æ€æŒä¹…åŒ–å’Œå¤ä¹ é˜Ÿåˆ—æŸ¥è¯¢æ€§èƒ½

- [x] åŸºç¡€è®¾æ–½é…ç½®
  - [x] ä¾èµ–ç®¡ç†: spring-boot-starter-data-redis
  - [x] Redis è¿æ¥é…ç½®: application.yml
- [x] å­¦ä¹ æ¨¡å—ç¼“å­˜ (Learning Module Caching)
  - [x] Redis Key: `learning:selection:{userId}` (TTL: 1h)
  - [x] çŠ¶æ€æŒä¹…åŒ–: ç¼“å­˜ LearningStateDto (åŒ…å« words, currentIndex, selectedWords)
  - [x] è¿›åº¦åŒæ­¥: å®ç° `updateLearningProgress` æ¥å£
- [x] å¤ä¹ æ¨¡å—ç¼“å­˜ (Review Module Caching)
  - [x] Redis Key: `review:queue:{userId}:{date}` (TTL: 24h)
  - [x] ç¼“å­˜ç­–ç•¥: è¯»æ—¶ç¼“å­˜ (Read-Through)ï¼Œæäº¤æ—¶å¤±æ•ˆ (Invalidate on Submit)
- [x] éªŒè¯: å­¦ä¹ æµç¨‹åˆ·æ–°é¡µé¢çŠ¶æ€ä¿æŒï¼Œå¤ä¹ é˜Ÿåˆ—ç¼“å­˜å¤±æ•ˆé€»è¾‘éªŒè¯ (Ref: requirement.md#UM-03)

---

## Phase 10: UI/UX é‡æ„ (Style D - Editor's Focus) âœ…

**ç›®æ ‡**: å®ç°ç»Ÿä¸€çš„ "Editor's Focus" è®¾è®¡é£æ ¼ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

- [x] è®¾è®¡ç³»ç»ŸåŸºç¡€
  - [x] é…è‰²æ–¹æ¡ˆ: Paper (#F9F9F7), Ink (#1C1C1E), Gold (#D4B483)
  - [x] å­—ä½“: Playfair Display (serif), Source Sans 3 (sans-serif)
  - [x] ç»„ä»¶: .paper-card ç»Ÿä¸€å¡ç‰‡é£æ ¼
- [x] è§†å›¾é‡æ„
  - [x] ProfileView.vue - Academic Record é£æ ¼
  - [x] LoginView.vue / RegisterView.vue - Editorial ç™»å½•é£æ ¼
  - [x] HomeView.vue - Morning Briefing é£æ ¼
  - [x] LearnView.vue - Reading Room é£æ ¼
  - [x] ReviewView.vue - Flashcard é£æ ¼
  - [x] VocabularyView.vue - Academic List é£æ ¼
- [x] å¸ƒå±€ä¼˜åŒ–
  - [x] MainLayout.vue - æ·±è‰²ä¾§è¾¹æ ï¼Œç”¨æˆ·å¤´åƒå¯ç‚¹å‡»å¯¼èˆª
- [x] åŠŸèƒ½ä¿®å¤
  - [x] å­¦ä¹ æ¨¡å—çµæ´»é€‰è¯ï¼šä¸å†å¼ºåˆ¶è¦æ±‚5ä¸ªå•è¯ï¼Œæµè§ˆå®Œå¯é€‰å•è¯åå³å¯è¿›å…¥å­¦ä¹ é˜¶æ®µ

